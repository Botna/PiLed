trigger:
  branches:
    exclude:
    - "*"

pr:
- main

pool:
  vmImage: 'ubuntu-latest'

steps:
- task: Bash@3
  inputs:
    targetType: 'inline'
    script: |
      echo $(Build.SourceVersion)
      
      set TestVar=$(Build.SourceVersion)
      
      set MyCustomVar=%TestVar:~0,7%
      
      echo $MyCustomVar
      
      echo ##vso[task.setvariable variable=ShortSourceVersion]$MyCustomVar
- task: Bash@3
  inputs:
    targetType: 'inline'
    script: 'echo $(Build.SourceVersion)'

# - task: DotNetCoreCLI@2
#   displayName: 'Restore projects'
#   inputs:
#     command: 'restore'
#     projects: '**/*.csproj'

# - task: DotNetCoreCLI@2
#   displayName: 'Build projects'
#   inputs:
#     command: 'build'
#     projects: '**/*.csproj'

# - task: DotNetCoreCLI@2
#   displayName: 'Run tests and report to ADO'
#   inputs:
#     command: test
#     projects: '**/*Test/*.csproj'
#     arguments: '--collect "Code coverage"'
